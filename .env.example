
# ====== CREDENTIELS BETFAIR ======



# Betfair credentials
BF_USER=ton_email_betfair
BF_PASS=ton_mot_de_passe
BF_APP_KEY=ta_app_key   # Delayed pour dev, Live pour prod
BF_CERTS_PATH=C:\chemin\vers\certs   # dossier contenant client-2048.crt et client-2048.key











# ====== PÉRIMÈTRE DE TRADING ======
DOG_COUNTRIES=GB,IE,AU,NZ
DOG_MARKET_TYPES=WIN,PLACE
LOOKAHEAD_MINUTES=60

# ====== CONTRÔLES DE RISQUE ======
MAX_DAILY_EXPOSURE=10
MAX_MARKET_STAKE=10
BLOCK_IN_PLAY=true
TRADING_START_HHMM=00:00
TRADING_END_HHMM=23:59

# ====== RUNTIME / BOUCLE ======
DRY_RUN=true               # true = simulation (aucun ordre envoyé)
USE_STREAMING=false        # false = polling REST (plus simple au début)
PREOFF_MINUTES=6           # fenêtre pré-départ où l’on autorise les signaux
MIN_PREOFF_MINUTES=0
ONE_BET_PER_MARKET=false   # false = autorise plusieurs signaux sur un même marché
SIGNAL_COOLDOWN_SEC=300
POLL_INTERVAL_SEC=1
MARKET_REFRESH_MINUTES=5

DOG_MARKET_TYPES=WIN

# ====== LOGS ======
LOG_LEVEL=DEBUG          # INFO, DEBUG, WARNING

# ====== CATEGORIES (4 familles) ======
ENABLE_BACK_WIN=true
ENABLE_LAY_WIN=false
ENABLE_BACK_PLACE=false
ENABLE_LAY_PLACE=false

# ====== SLOTS PAR CATÉGORIE (1..10) ======
# (true pour activer une stratégie dans le slot)
ENABLE_BACK_WIN_1=true
ENABLE_BACK_WIN_2=false
ENABLE_BACK_WIN_3=false
ENABLE_BACK_WIN_4=false
ENABLE_BACK_WIN_5=false
ENABLE_BACK_WIN_6=false
ENABLE_BACK_WIN_7=false
ENABLE_BACK_WIN_8=false
ENABLE_BACK_WIN_9=false
ENABLE_BACK_WIN_10=false

ENABLE_LAY_WIN_1=true
ENABLE_LAY_WIN_2=false
ENABLE_LAY_WIN_3=false
ENABLE_LAY_WIN_4=false
ENABLE_LAY_WIN_5=false
ENABLE_LAY_WIN_6=false
ENABLE_LAY_WIN_7=false
ENABLE_LAY_WIN_8=false
ENABLE_LAY_WIN_9=false
ENABLE_LAY_WIN_10=false

ENABLE_BACK_PLACE_1=true
ENABLE_BACK_PLACE_2=false
ENABLE_BACK_PLACE_3=false
ENABLE_BACK_PLACE_4=false
ENABLE_BACK_PLACE_5=false
ENABLE_BACK_PLACE_6=false
ENABLE_BACK_PLACE_7=false
ENABLE_BACK_PLACE_8=false
ENABLE_BACK_PLACE_9=false
ENABLE_BACK_PLACE_10=false

ENABLE_LAY_PLACE_1=true
ENABLE_LAY_PLACE_2=false
ENABLE_LAY_PLACE_3=false
ENABLE_LAY_PLACE_4=false
ENABLE_LAY_PLACE_5=false
ENABLE_LAY_PLACE_6=false
ENABLE_LAY_PLACE_7=false
ENABLE_LAY_PLACE_8=false
ENABLE_LAY_PLACE_9=false
ENABLE_LAY_PLACE_10=false

# ====== MISES ======
# Mise unitaire par catégorie (si vide => min(MAX_MARKET_STAKE, 2.0))
STAKE_BACK_WIN=
STAKE_LAY_WIN=
STAKE_BACK_PLACE=
STAKE_LAY_PLACE=

# (Optionnel) Mise par slot : dé-commente et fixe pour surcharger un slot précis
# STAKE_BACK_WIN_1=2.0
# STAKE_LAY_WIN_1=2.0
# STAKE_BACK_PLACE_1=2.0
# STAKE_LAY_PLACE_1=2.0


# --- Source de prix (comment choisir "price" dans les formules) ---
# Valeurs possibles : LTP_FIRST (par défaut), BSP_FIRST, LTP_ONLY, BSP_ONLY
PRICE_SOURCE_BACK_WIN=LTP_FIRST
PRICE_SOURCE_LAY_WIN=LTP_FIRST
PRICE_SOURCE_BACK_PLACE=LTP_FIRST
PRICE_SOURCE_LAY_PLACE=LTP_FIRST

# --- Formules de mise par catégorie (fallback si pas de formule par slot) ---
# Variables dispo: price, ltp, bsp, stake_cap
# (stake_cap = MAX_MARKET_STAKE du .env ; on clippe automatiquement à [0, stake_cap])
STAKE_FORMULA_BACK_WIN=
STAKE_FORMULA_LAY_WIN=
STAKE_FORMULA_BACK_PLACE=
STAKE_FORMULA_LAY_PLACE=

# --- Optionnel : formules par slot (si présent, ça écrase la formule de catégorie) ---
# Exemples :
# BACK WIN slot 1 : mise = min(stake_cap, 2 / max(price-1, 0.01))
STAKE_FORMULA_BACK_WIN_1=min(stake_cap, 2 / max(price-1, 0.01))

# LAY WIN slot 1 : viser 1 unité de "liability" -> stake = 1 / (price-1) plafonné
STAKE_FORMULA_LAY_WIN_1=min(stake_cap, 1 / max(price-1, 0.01))

# BACK PLACE slot 1 : proportionnelle à l’inverse de la cote, plafonnée
STAKE_FORMULA_BACK_PLACE_1=min(stake_cap, 1.5 / max(price-1, 0.01))

# LAY PLACE slot 1 : petite liability cible (0.5)
STAKE_FORMULA_LAY_PLACE_1=min(stake_cap, 0.5 / max(price-1, 0.01))



# gating temporel (phases) + tolérance +/- secondes
PHASE_SECONDS=300,150,80,45,3
PHASE_TOLERANCE_SECS=120

# anti-spam : temps mini entre 2 décisions de la même stratégie sur le même marché
DECISION_COOLDOWN_SECS=20.0

# anti-spam des warnings risque
RISK_WARN_THROTTLE_SECS=5.0






# Robustesse API / polling
MAX_LISTMARKETBOOK_CHUNK=5          # taille des paquets listMarketBook (évite TOO_MUCH_DATA)
REFRESH_CATALOGUE_EVERY_MIN=10      # re-scan des catalogues pour prendre les horaires corrigés
SLEEP_BETWEEN_POLL_MS=1200          # rythme du poll (déjà présent chez toi)
COOLDOWN_AFTER_DECISION_SECONDS=90  # anti-spam (déjà présent chez toi)

# Retry & ordres
ORDER_RETRY_COUNT=2
ORDER_RETRY_SLEEP_MS=300

# Garde-fous de mise (adaptés à ta devise/juridiction)
MIN_BACK_STAKE=2.0                  # mise minimale en back
MIN_LAY_LIABILITY=2.0               # responsabilité minimale en lay

# Sécurité in-play (déjà présent)
BLOCK_IN_PLAY=true





# Durcissement client
MAX_MARKETS_PER_CHUNK=5
INCLUDE_SP_IN_BOOK=true 
RATE_LIMIT_SLEEP_MS=200
API_RETRIES=3
API_RETRY_BACKOFF_MS=300


RESCAN_MINUTES=5



# ---- Snapshots de features / visibilité ----
SNAPSHOT_ENABLED=true
SNAPSHOT_TIMES=300,150,80,45,2

SNAPSHOT_DIR=C:\betfair-dogbot\snapshots



SNAPSHOT_TOLERANCE=5
SNAPSHOT_ONLY_IF_DECISION=false











